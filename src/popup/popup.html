<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reclaim Time - 設定</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="title-section">
        <h1>Reclaim Time</h1>
        <p class="subtitle">時間を取り戻す</p>
      </div>
      <div class="master-switch-section">
        <div class="master-switch">
          <label class="master-toggle-switch">
            <input type="checkbox" id="masterSwitch" checked>
            <span class="master-toggle-slider"></span>
          </label>
          <div class="master-switch-label">
            <span class="switch-text" id="switchText">ブロック有効</span>
            <small class="switch-description" id="switchDescription">全サイトのブロックが有効です</small>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Add new site form -->
    <div class="add-site-section">
      <h2>サイトを追加</h2>
      <form id="addSiteForm">
        <div class="form-group">
          <label for="siteUrl">サイトURL/パターン</label>
          <input 
            type="text" 
            id="siteUrl" 
            placeholder="例: youtube.com, *.twitter.com"
            required
          >
          <small>ワイルドカード(*)を使用できます</small>
        </div>
        
        <div class="form-group">
          <label>ブロックモード</label>
          <div class="mode-selector">
            <label class="mode-option">
              <input type="radio" name="blockMode" value="simple" checked>
              <span class="mode-label">シンプル</span>
              <small>指定時刻まで毎日ブロック</small>
            </label>
            <label class="mode-option">
              <input type="radio" name="blockMode" value="timeRange">
              <span class="mode-label">時間帯</span>
              <small>毎日決まった時間帯でブロック</small>
            </label>
          </div>
        </div>
        
        <div id="simpleMode" class="time-config">
          <div class="form-group">
            <label for="unblockTime">解除時刻</label>
            <input 
              type="time" 
              id="unblockTime" 
              required
            >
            <small>この時刻までアクセスがブロックされます</small>
          </div>
        </div>
        
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="excludeWeekends" checked>
            <span>土日を除外</span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="excludeHolidays" checked>
            <span>祝日を除外</span>
          </label>
          <small>チェックを入れると土日祝日はブロックされません</small>
        </div>
        
        <div id="timeRangeMode" class="time-config hidden">
          <div class="form-row">
            <div class="form-group">
              <label for="blockStart">ブロック開始</label>
              <input 
                type="time" 
                id="blockStart" 
                value="08:00"
              >
            </div>
            <div class="form-group">
              <label for="blockEnd">ブロック終了</label>
              <input 
                type="time" 
                id="blockEnd" 
                value="19:00"
              >
            </div>
          </div>
          <small class="time-preview">
            🕐 <span id="timePreview">8:00-19:00はブロック、19:00-翌8:00はアクセス可能</span>
          </small>
        </div>
        
        <button type="submit" class="btn btn-primary">
          追加
        </button>
      </form>
    </div>
    
    <!-- Blocked sites list -->
    <div class="sites-section">
      <h2>ブロック中のサイト</h2>
      <div id="sitesList" class="sites-list">
        <!-- Sites will be dynamically added here -->
      </div>
      <div id="emptySites" class="empty-state">
        ブロックされているサイトはありません
      </div>
    </div>
  </div>
  
  <!-- Edit Site Modal -->
  <div id="editModal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3>サイト設定を編集</h3>
        <button id="closeModal" class="modal-close">&times;</button>
      </div>
      <form id="editSiteForm">
        <div class="form-group">
          <label for="editSiteUrl">サイトURL/パターン</label>
          <input 
            type="text" 
            id="editSiteUrl" 
            required
            readonly
          >
          <small>URLは変更できません</small>
        </div>
        
        <div class="form-group">
          <label>ブロックモード</label>
          <div class="mode-selector">
            <label class="mode-option">
              <input type="radio" name="editBlockMode" value="simple">
              <span class="mode-label">シンプル</span>
              <small>指定時刻まで毎日ブロック</small>
            </label>
            <label class="mode-option">
              <input type="radio" name="editBlockMode" value="timeRange">
              <span class="mode-label">時間帯</span>
              <small>毎日決まった時間帯でブロック</small>
            </label>
          </div>
        </div>
        
        <div id="editSimpleMode" class="time-config">
          <div class="form-group">
            <label for="editUnblockTime">解除時刻</label>
            <input 
              type="time" 
              id="editUnblockTime" 
            >
            <small>この時刻までアクセスがブロックされます</small>
          </div>
        </div>
        
        <div id="editTimeRangeMode" class="time-config hidden">
          <div class="form-row">
            <div class="form-group">
              <label for="editBlockStart">ブロック開始</label>
              <input 
                type="time" 
                id="editBlockStart" 
              >
            </div>
            <div class="form-group">
              <label for="editBlockEnd">ブロック終了</label>
              <input 
                type="time" 
                id="editBlockEnd" 
              >
            </div>
          </div>
          <small class="time-preview">
            🕐 <span id="editTimePreview"></span>
          </small>
        </div>
        
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="editExcludeWeekends">
            <span>土日を除外</span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="editExcludeHolidays">
            <span>祝日を除外</span>
          </label>
          <small>チェックを入れると土日祝日はブロックされません</small>
        </div>
        
        <div class="modal-actions">
          <button type="submit" class="btn btn-primary">
            保存
          </button>
          <button type="button" id="cancelEdit" class="btn btn-secondary">
            キャンセル
          </button>
        </div>
      </form>
    </div>
  </div>
  
  <script src="popup.js"></script>
</body>
</html>